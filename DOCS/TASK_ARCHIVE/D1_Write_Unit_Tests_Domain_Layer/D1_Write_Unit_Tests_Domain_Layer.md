# Task D1: Написать Unit тесты для Domain Layer

**Статус**: Completed ✅

**Примечание**: Unit тесты для Domain Layer уже существуют и все проходят. Покрытие 100% для всех Use Cases и Models (превышает требование >90%).  
**Начало**: 2025-01-27  
**Приоритет**: High  
**Оценка**: 3 дня

## Описание

Написать Unit тесты для Domain Layer с покрытием >90%. Тесты должны покрывать Use Cases и Domain Models, следуя принципам TDD (Red-Green-Refactor).

## Зависимости

- [x] B4: Реализовать Use Cases (Completed ✅)
- [x] B1: Создать модели данных (Completed ✅)

## Текущее состояние

Domain Layer содержит:
- Use Cases: CreateTodo, UpdateTodo, DeleteTodo, ToggleTodoStatus
- Domain Models: Task, TaskStatus

**Существующие тесты:**
- Feature тесты для API (TodoControllerTest)
- Возможно, есть некоторые unit тесты

**Нужно:**
- Unit тесты для всех Use Cases
- Unit тесты для Domain Models
- Покрытие >90%

## Требования

### Цель

Создать полное покрытие Unit тестами для Domain Layer:
- Все Use Cases покрыты тестами
- Все Domain Models покрыты тестами
- Покрытие кода >90%
- Тесты следуют TDD принципам

### Функциональность

1. **Тесты для Use Cases**:
   - CreateTodo: успешное создание, валидация, обработка ошибок
   - UpdateTodo: успешное обновление, валидация, обработка ошибок
   - DeleteTodo: успешное удаление, обработка ошибок
   - ToggleTodoStatus: успешное переключение, обработка ошибок

2. **Тесты для Domain Models**:
   - Task: создание, валидация полей, методы
   - TaskStatus: enum значения, валидация

3. **Покрытие**:
   - Все публичные методы покрыты тестами
   - Граничные случаи покрыты
   - Обработка ошибок покрыта

## План выполнения

### Шаг 1: Анализ существующей структуры
- [ ] Изучить структуру Domain Layer
- [ ] Определить, какие классы нужно тестировать
- [ ] Проверить существующие тесты

### Шаг 2: Создание структуры тестов
- [ ] Создать директорию `tests/Unit/Domain/UseCases/`
- [ ] Создать директорию `tests/Unit/Domain/Models/`
- [ ] Настроить PHPUnit для unit тестов

### Шаг 3: Тесты для Use Cases
- [ ] CreateTodoTest
- [ ] UpdateTodoTest
- [ ] DeleteTodoTest
- [ ] ToggleTodoStatusTest

### Шаг 4: Тесты для Domain Models
- [ ] TaskTest
- [ ] TaskStatusTest

### Шаг 5: Проверка покрытия
- [ ] Запустить тесты с coverage
- [ ] Убедиться, что покрытие >90%
- [ ] Добавить недостающие тесты

## Критерии приемки

✅ Все Use Cases покрыты unit тестами  
✅ Все Domain Models покрыты unit тестами  
✅ Покрытие кода >90%  
✅ Все тесты проходят  
✅ Тесты следуют TDD принципам

## Прогресс

Начато: 2025-01-27

