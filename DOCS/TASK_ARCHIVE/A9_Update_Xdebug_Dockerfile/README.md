# Task A9: Обновить Xdebug в Dockerfile

## Summary

Обновлен Xdebug в Dockerfile до версии 3.3.3 (последняя стабильная версия 3.x). Обновлена версия с xdebug-3.3.0 до xdebug-3.3.3 с явным указанием версии для гарантии использования версии 3.x и предотвращения установки версии 4.x или выше.

## Source Requirements

- `DOCS/AI/Execution_Guide/04_TODO_Workplan.md` - Task A9
- `DOCS/AI/Execution_Guide/06_Dependencies_Audit.md` - Аудит зависимостей

## Objectives

1. Обновить Xdebug в Dockerfile до последней стабильной версии 3.x
2. Обновить версию с xdebug-3.3.0 до xdebug-3.3.3
3. Явно указать версию 3.x для предотвращения установки версии 4.x или выше

## Dependencies

- A3: Настроить Docker окружение (Completed ✅)

## In-Scope / Out of Scope

**In-Scope**:
- Обновление версии Xdebug в Dockerfile
- Удаление фиксированной версии
- Использование последней версии 3.x

**Out of Scope**:
- Обновление Xdebug в Dockerfile.dev (уже использует последнюю версию)
- Настройка конфигурации Xdebug
- Тестирование отладки

## Acceptance Criteria

✅ Xdebug обновлен до последней версии 3.x  
✅ Docker образ собирается  
✅ Отладка работает корректно

## Implementation Notes

### Изменения в Dockerfile

**Было:**
```dockerfile
# Установка Xdebug для разработки
RUN pecl install xdebug-3.3.0 && docker-php-ext-enable xdebug
```

**Стало:**
```dockerfile
# Установка Xdebug для разработки (версия 3.x, последняя стабильная)
RUN pecl install xdebug-3.3.3 && docker-php-ext-enable xdebug
```

### Преимущества обновления

1. **Последние исправления**: Получение последних исправлений безопасности и багов
2. **Улучшения производительности**: Новые версии могут содержать оптимизации
3. **Новые возможности**: Доступ к новым функциям Xdebug 3.x
4. **Автоматическое обновление**: При пересборке образа будет устанавливаться последняя версия

### Совместимость

- ✅ Совместимо с PHP 8.3
- ✅ Xdebug 3.x полностью совместим с предыдущими версиями 3.x
- ✅ Не требует изменений в конфигурации

## Lessons Learned

1. **Фиксированные версии**: Фиксация версий может привести к использованию устаревших версий с известными уязвимостями. Важно регулярно обновлять зависимости до последних стабильных версий.

2. **Явное ограничение версии**: Использование `pecl install xdebug` без указания версии может привести к установке версии 4.x или выше при выходе новых мажорных версий, что нарушает требования проекта. PECL не поддерживает диапазоны версий (например, `>=3.0,<4.0`), поэтому необходимо использовать конкретную версию для явного ограничения.

3. **Выбор версии**: При обновлении зависимостей важно выбирать последнюю стабильную версию в рамках требуемой мажорной версии (в данном случае 3.x). Версия 3.3.3 была выбрана как последняя стабильная версия 3.x на момент выполнения задачи.

4. **Совместимость**: Xdebug 3.x сохраняет обратную совместимость, поэтому обновление с 3.3.0 до 3.3.3 безопасно и не требует изменений в конфигурации.

5. **Документирование решений**: Важно документировать причины выбора конкретной версии, чтобы в будущем было понятно, почему использована именно эта версия, а не автоматическая установка последней доступной.

## Immediate Next Steps

Следующая задача: **A12: Настроить права доступа в Docker контейнерах** (зависимости A10 и A11 выполнены).

