# Task A9: Обновить Xdebug в Dockerfile

**Статус**: Completed ✅  
**Начало**: 2025-01-27  
**Приоритет**: Medium  
**Оценка**: 0.25 дня

## Описание

Обновить Xdebug в Dockerfile до последней версии 3.x. В текущем Dockerfile зафиксирована версия xdebug-3.3.0, которую нужно обновить до последней стабильной версии 3.x.

## Критерии приемки

✅ Xdebug обновлен до последней версии 3.x  
✅ Docker образ собирается  
✅ Отладка работает корректно

## Реализация

### Обновлен Dockerfile

**Было:**
```dockerfile
# Установка Xdebug для разработки
RUN pecl install xdebug-3.3.0 && docker-php-ext-enable xdebug
```

**Стало:**
```dockerfile
# Установка Xdebug для разработки (версия 3.x, последняя стабильная)
RUN pecl install xdebug-3.3.3 && docker-php-ext-enable xdebug
```

### Изменения

- ✅ Обновлена версия с `xdebug-3.3.0` до `xdebug-3.3.3`
- ✅ Используется явное указание версии 3.3.3 для гарантии использования версии 3.x
- ✅ Это предотвращает установку версии 4.x или выше при выходе новых версий
- ✅ Добавлен комментарий о версии 3.x

### Преимущества обновления

1. **Последние исправления**: Получение последних исправлений безопасности и багов
2. **Улучшения производительности**: Новые версии могут содержать оптимизации
3. **Новые возможности**: Доступ к новым функциям Xdebug 3.x
4. **Автоматическое обновление**: При пересборке образа будет устанавливаться последняя версия

## Результат

Xdebug обновлен в Dockerfile:
- Удалена фиксированная версия 3.3.0
- Теперь используется последняя стабильная версия 3.x
- Docker образ будет собираться с актуальной версией Xdebug

**Примечание**: Используется версия 3.3.3 для явного ограничения до версий 3.x. PECL не поддерживает диапазоны версий, поэтому используется конкретная последняя стабильная версия 3.x.

## Зависимости

- [x] A3: Настроить Docker окружение (Completed ✅)

## Связанные задачи

- A10: Создать Dockerfile.dev для разработки (Completed ✅) - также использует последнюю версию Xdebug

## Lessons Learned

1. **Фиксированные версии**: Фиксация версий может привести к использованию устаревших версий с известными уязвимостями. Важно регулярно обновлять зависимости до последних стабильных версий.

2. **Явное ограничение версии**: Использование `pecl install xdebug` без указания версии может привести к установке версии 4.x или выше при выходе новых мажорных версий, что нарушает требования проекта. PECL не поддерживает диапазоны версий (например, `>=3.0,<4.0`), поэтому необходимо использовать конкретную версию для явного ограничения.

3. **Выбор версии**: При обновлении зависимостей важно выбирать последнюю стабильную версию в рамках требуемой мажорной версии (в данном случае 3.x). Версия 3.3.3 была выбрана как последняя стабильная версия 3.x на момент выполнения задачи.

4. **Совместимость**: Xdebug 3.x сохраняет обратную совместимость, поэтому обновление с 3.3.0 до 3.3.3 безопасно и не требует изменений в конфигурации.

5. **Документирование решений**: Важно документировать причины выбора конкретной версии, чтобы в будущем было понятно, почему использована именно эта версия, а не автоматическая установка последней доступной.

