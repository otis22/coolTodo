# Правила написания PRD (Product Requirements Document)

## Цель

Этот документ объясняет, как создавать самодостаточные, однозначные и машиночитаемые PRD для проекта CoolTodo. PRD должны быть структурированы таким образом, чтобы автономные ИИ-агенты могли немедленно приступить к работе без дополнительных уточнений.

## Семишаговый процесс создания PRD

### Шаг 1: Определить scope и намерение

- Четко определите границы задачи (что входит, что не входит)
- Укажите бизнес-цель и ожидаемый результат
- Определите целевую аудиторию и контекст использования

### Шаг 2: Декомпозировать в структурированный TODO план

Разбейте задачу на подзадачи с четкими границами:
- Каждая подзадача должна быть атомарной
- Подзадачи должны быть упорядочены по зависимостям
- Используйте иерархическую структуру (задача → подзадача → шаг)

### Шаг 3: Обогатить каждую подзадачу метаданными

Для каждой подзадачи укажите:

| Поле | Описание |
|------|----------|
| **Priority** | High / Medium / Low |
| **Effort** | Оценка времени (в днях или часах) |
| **Tools** | Необходимые инструменты из стека |
| **Acceptance Criteria** | Конкретные, измеримые критерии приемки |
| **Dependencies** | Список ID задач, от которых зависит эта задача |

### Шаг 4: Создать PRD-подобную секцию

#### Функциональные требования (FR)

- Пронумеруйте каждое требование (FR1, FR2, ...)
- Опишите триггеры (когда требование активируется)
- Укажите ожидаемое поведение системы
- Добавьте примеры использования

#### Нефункциональные требования (NFR)

- **NFR1 (Performance)**: Конкретные метрики производительности
- **NFR2 (Security)**: Требования безопасности
- **NFR3 (Scalability)**: Требования к масштабируемости
- **NFR4 (Usability)**: Требования к удобству использования

#### Edge Cases

- Опишите граничные случаи и обработку ошибок
- Укажите поведение при невалидных входных данных
- Определите поведение при сбоях сети/сервера

### Шаг 5: Применить правила контроля качества

Избегайте расплывчатого языка:

❌ **Плохо**: "Система должна быть быстрой"
✅ **Хорошо**: "Время ответа API не должно превышать 200ms для 95% запросов"

❌ **Плохо**: "Добавить валидацию"
✅ **Хорошо**: "Валидировать email по RFC 5322, отклонить запрос с кодом 422 если email невалиден"

Используйте конкретные метрики и измеримые критерии.

### Шаг 6: Формат вывода: Markdown с таблицами

PRD должен быть структурирован в Markdown с использованием:

- Таблиц для метаданных задач
- Списков для требований
- Блоков кода для примеров API/конфигураций
- Четких секций с заголовками

### Шаг 7: Документирование результатов и решений

После решения каждой задачи необходимо зафиксировать:

#### Assumption Log (Журнал предположений)

Задокументируйте все предположения, которые были сделаны в процессе решения задачи:
- Предположения о поведении системы или библиотек
- Предположения о требованиях, которые не были явно указаны
- Предположения о контексте или окружении
- Любые другие допущения, влияющие на решение

**Формат**:
```markdown
### Assumption Log

- **A1**: [Описание предположения] - [Обоснование]
- **A2**: [Описание предположения] - [Обоснование]
```

#### Успешные решения

Опишите решения, которые были успешно применены:
- Какие подходы сработали хорошо
- Какие паттерны или практики были использованы
- Что можно переиспользовать в будущем

**Формат**:
```markdown
### Успешные решения

- **Решение 1**: [Описание решения] - [Почему оно было эффективным]
- **Решение 2**: [Описание решения] - [Почему оно было эффективным]
```

#### Неверные решения

Подробно опишите решения, которые были приняты, но оказались неверными или неоптимальными:
- Какое решение было принято изначально
- Почему оно было выбрано
- Какие проблемы возникли
- Какое решение было применено вместо него
- Что можно извлечь из этого опыта

**Формат**:
```markdown
### Неверные решения

#### Неверное решение 1: [Краткое название]

**Принятое решение**: [Подробное описание того, что было сделано]

**Обоснование выбора**: [Почему это решение казалось правильным]

**Возникшие проблемы**: 
- [Проблема 1]
- [Проблема 2]

**Корректное решение**: [Что было сделано вместо этого]

**Извлеченные уроки**: [Что можно извлечь из этого опыта]
```

## Пример структуры PRD

```markdown
# PRD: [Название задачи]

## Scope и намерение

[Описание границ и целей]

## TODO план

| Task ID | Description | Priority | Effort | Dependencies | Tools | Acceptance Criteria |
|---------|-------------|----------|--------|--------------|-------|---------------------|
| T1 | Подзадача 1 | High | 1d | None | PHPUnit | Тесты проходят |

## Функциональные требования

### FR1: [Название требования]

**Триггер**: [Когда активируется]
**Ожидаемое поведение**: [Что происходит]
**Пример**: [Пример использования]

## Нефункциональные требования

### NFR1: Performance
- Время ответа API < 200ms для 95% запросов

## Edge Cases

- [Описание граничного случая и обработки]

## Документирование результатов

### Assumption Log

- **A1**: [Описание предположения] - [Обоснование]

### Успешные решения

- **Решение 1**: [Описание решения] - [Почему оно было эффективным]

### Неверные решения

#### Неверное решение 1: [Краткое название]

**Принятое решение**: [Подробное описание того, что было сделано]

**Обоснование выбора**: [Почему это решение казалось правильным]

**Возникшие проблемы**: 
- [Проблема 1]

**Корректное решение**: [Что было сделано вместо этого]

**Извлеченные уроки**: [Что можно извлечь из этого опыта]
```

## Контрольный список перед публикацией PRD

- [ ] Все требования имеют уникальные идентификаторы (FR1, FR2, ...)
- [ ] Каждая задача имеет метаданные (Priority, Effort, Dependencies)
- [ ] Критерии приемки измеримы и конкретны
- [ ] Edge cases описаны
- [ ] Нет расплывчатых формулировок
- [ ] Формат соответствует шаблону Markdown с таблицами

## Контрольный список после решения задачи

- [ ] Зафиксирован Assumption Log со всеми предположениями
- [ ] Документированы все успешные решения с обоснованием
- [ ] Подробно описаны все неверные решения с анализом причин и извлеченных уроков

