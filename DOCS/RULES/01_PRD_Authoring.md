# Правила написания PRD (Product Requirements Document)

## Цель

Этот документ объясняет, как создавать самодостаточные, однозначные и машиночитаемые PRD для проекта CoolTodo. PRD должны быть структурированы таким образом, чтобы автономные ИИ-агенты могли немедленно приступить к работе без дополнительных уточнений.

## Шестишаговый процесс создания PRD

### Шаг 1: Определить scope и намерение

- Четко определите границы задачи (что входит, что не входит)
- Укажите бизнес-цель и ожидаемый результат
- Определите целевую аудиторию и контекст использования

### Шаг 2: Декомпозировать в структурированный TODO план

Разбейте задачу на подзадачи с четкими границами:
- Каждая подзадача должна быть атомарной
- Подзадачи должны быть упорядочены по зависимостям
- Используйте иерархическую структуру (задача → подзадача → шаг)

### Шаг 3: Обогатить каждую подзадачу метаданными

Для каждой подзадачи укажите:

| Поле | Описание |
|------|----------|
| **Priority** | High / Medium / Low |
| **Effort** | Оценка времени (в днях или часах) |
| **Tools** | Необходимые инструменты из стека |
| **Acceptance Criteria** | Конкретные, измеримые критерии приемки |
| **Dependencies** | Список ID задач, от которых зависит эта задача |

### Шаг 4: Создать PRD-подобную секцию

#### Функциональные требования (FR)

- Пронумеруйте каждое требование (FR1, FR2, ...)
- Опишите триггеры (когда требование активируется)
- Укажите ожидаемое поведение системы
- Добавьте примеры использования

#### Нефункциональные требования (NFR)

- **NFR1 (Performance)**: Конкретные метрики производительности
- **NFR2 (Security)**: Требования безопасности
- **NFR3 (Scalability)**: Требования к масштабируемости
- **NFR4 (Usability)**: Требования к удобству использования

#### Edge Cases

- Опишите граничные случаи и обработку ошибок
- Укажите поведение при невалидных входных данных
- Определите поведение при сбоях сети/сервера

### Шаг 5: Применить правила контроля качества

Избегайте расплывчатого языка:

❌ **Плохо**: "Система должна быть быстрой"
✅ **Хорошо**: "Время ответа API не должно превышать 200ms для 95% запросов"

❌ **Плохо**: "Добавить валидацию"
✅ **Хорошо**: "Валидировать email по RFC 5322, отклонить запрос с кодом 422 если email невалиден"

Используйте конкретные метрики и измеримые критерии.

### Шаг 6: Формат вывода: Markdown с таблицами

PRD должен быть структурирован в Markdown с использованием:

- Таблиц для метаданных задач
- Списков для требований
- Блоков кода для примеров API/конфигураций
- Четких секций с заголовками

## Пример структуры PRD

```markdown
# PRD: [Название задачи]

## Scope и намерение

[Описание границ и целей]

## TODO план

| Task ID | Description | Priority | Effort | Dependencies | Tools | Acceptance Criteria |
|---------|-------------|----------|--------|--------------|-------|---------------------|
| T1 | Подзадача 1 | High | 1d | None | PHPUnit | Тесты проходят |

## Функциональные требования

### FR1: [Название требования]

**Триггер**: [Когда активируется]
**Ожидаемое поведение**: [Что происходит]
**Пример**: [Пример использования]

## Нефункциональные требования

### NFR1: Performance
- Время ответа API < 200ms для 95% запросов

## Edge Cases

- [Описание граничного случая и обработки]
```

## Контрольный список перед публикацией PRD

- [ ] Все требования имеют уникальные идентификаторы (FR1, FR2, ...)
- [ ] Каждая задача имеет метаданные (Priority, Effort, Dependencies)
- [ ] Критерии приемки измеримы и конкретны
- [ ] Edge cases описаны
- [ ] Нет расплывчатых формулировок
- [ ] Формат соответствует шаблону Markdown с таблицами

