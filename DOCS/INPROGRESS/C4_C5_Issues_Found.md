# Проблемы, обнаруженные при проверке C4 и C5 в браузере

**Дата**: 2025-01-27  
**Статус**: Open

## Обнаруженные проблемы

### Проблема 1: Completed задачи не отображаются при фильтре "Completed"

**Описание**:
- В API есть completed задача (id=3, "Test Completed Task")
- При активации фильтра "Completed" список задач пустой
- При фильтре "All" отображаются только active задачи

**Причина**:
- Задачи загружаются при монтировании компонента (`onMounted`)
- После изменения статуса задачи через API (например, через curl), фронтенд не обновляется автоматически
- Нужно либо перезагрузить страницу, либо добавить автоматическое обновление после изменения статуса

**Воспроизведение**:
1. Открыть приложение в браузере
2. Создать задачу через API: `curl -X POST http://localhost:8080/api/todos -H "Content-Type: application/json" -d '{"title":"Test"}'`
3. Изменить статус на completed: `curl -X PATCH http://localhost:8080/api/todos/3/status`
4. В браузере переключить фильтр на "Completed"
5. Список пустой, хотя в API есть completed задача

**Решение**:
- Добавить автоматическое обновление списка задач после изменения статуса
- Или добавить кнопку "Обновить" для ручного обновления
- Или использовать WebSocket для real-time обновлений (более сложное решение)

### Проблема 2: Счетчик активных задач не обновляется при изменении статуса через API

**Описание**:
- Счетчик показывает "1 item left" даже когда есть 2 active задачи
- Это происходит потому, что фронтенд не знает об изменениях, сделанных через API

**Причина**:
- Та же причина, что и в Проблеме 1 - отсутствие автоматического обновления

**Решение**:
- Решить вместе с Проблемой 1

## Что работает правильно

✅ Фильтры переключаются корректно (All, Active, Completed)  
✅ Счетчик отображается в футере  
✅ UI фильтров работает (кнопки кликабельны, активный фильтр выделен)  
✅ Фильтрация работает для задач, которые уже загружены во фронтенде  
✅ Счетчик корректно считает активные задачи из загруженного списка

## Рекомендации

1. **Краткосрочное решение**: Добавить кнопку "Обновить" для ручного обновления списка задач
2. **Среднесрочное решение**: Автоматически обновлять список после каждого изменения (polling или refetch после мутаций)
3. **Долгосрочное решение**: Использовать WebSocket для real-time синхронизации (если требуется)

## Приоритет

**Medium** - Функциональность работает, но есть UX проблема: пользователь не видит изменения, сделанные извне (например, другим устройством или через API напрямую).

