# Task C6: Реализовать редактирование задачи (double-click)

**Статус**: In Progress  
**Начало**: 2025-01-27  
**Приоритет**: High  
**Оценка**: 1.5 дня

## Описание

Реализовать возможность редактирования задачи по двойному клику. При двойном клике на текст задачи должно появляться поле ввода для редактирования. Сохранение по Enter, отмена по Escape.

## Зависимости

- [x] C2: Реализовать компонент TodoItem (Completed ✅)

## Текущее состояние

В `TodoItem.vue` задача отображается как статический текст. Нужно добавить:
- Обработчик двойного клика
- Режим редактирования с полем ввода
- Сохранение по Enter
- Отмена по Escape
- Интеграция с API для обновления задачи

## Требования

### Цель

Добавить возможность редактирования задачи:
- Двойной клик на текст задачи активирует режим редактирования
- Появляется поле ввода с текущим текстом
- Enter сохраняет изменения (вызывает API)
- Escape отменяет редактирование
- При потере фокуса (blur) также сохраняется (опционально, можно сделать как в TodoMVC)

### Функциональность

1. **Режим редактирования**:
   - При двойном клике текст заменяется на поле ввода
   - Поле ввода получает фокус автоматически
   - Текущий текст задачи предзаполнен в поле

2. **Сохранение**:
   - Enter сохраняет изменения через API (`updateTodo`)
   - При успешном сохранении режим редактирования закрывается
   - При ошибке показывается сообщение, редактирование остается активным

3. **Отмена**:
   - Escape отменяет редактирование без сохранения
   - Текст возвращается к исходному значению

4. **UX**:
   - Плавный переход между режимами
   - Визуальное выделение поля редактирования
   - Класс `editing` для стилизации

## План выполнения

### Шаг 1: Добавление состояния редактирования
- [ ] Добавить `isEditing` ref для отслеживания режима редактирования
- [ ] Добавить `editTitle` ref для хранения редактируемого текста

### Шаг 2: Обработчики событий
- [ ] Добавить `@dblclick` на текст задачи
- [ ] Реализовать функцию `startEditing()` для активации режима
- [ ] Реализовать функцию `saveEdit()` для сохранения
- [ ] Реализовать функцию `cancelEdit()` для отмены

### Шаг 3: Интеграция с API
- [ ] Использовать `updateTodo` из API сервиса
- [ ] Обработать успешное сохранение (emit 'updated')
- [ ] Обработать ошибки сохранения

### Шаг 4: Обработка клавиатуры
- [ ] Добавить `@keydown.enter` для сохранения
- [ ] Добавить `@keydown.escape` для отмены

### Шаг 5: Стилизация
- [ ] Добавить класс `editing` к элементу при редактировании
- [ ] Стилизовать поле ввода в режиме редактирования
- [ ] Убедиться, что поле ввода выглядит как часть задачи

## Критерии приемки

✅ Двойной клик на текст задачи активирует режим редактирования  
✅ Поле ввода появляется с предзаполненным текстом  
✅ Enter сохраняет изменения через API  
✅ Escape отменяет редактирование  
✅ При сохранении задача обновляется в списке  
✅ Ошибки сохранения обрабатываются корректно  
✅ Визуально редактирование выглядит естественно

## Прогресс

Начато: 2025-01-27

