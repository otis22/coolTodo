# Task A23: Исправить права доступа для composer install

**Статус**: Open  
**Приоритет**: High  
**Оценка**: 0.25 дня

## Описание

При выполнении `composer install` в Docker контейнере возникает ошибка создания директории `/var/www/html/vendor/composer`. Директория `vendor` существует, но принадлежит root, что блокирует установку зависимостей от имени пользователя хоста.

## Проблема

**Симптомы**:
```
In Filesystem.php line 261:
/var/www/html/vendor/composer does not exist and could not be created:
```

**Причина**:
- Директория `backend/vendor` на хосте принадлежит root (создана ранее от root)
- Docker контейнер запускается от имени пользователя хоста (`user: "${UID:-1000}:${GID:-1000}"`)
- Composer не может создать поддиректории в `/var/www/html/vendor` из-за прав доступа

**Текущая ситуация**:
```bash
$ ls -la backend/vendor
drwxr-xr-x  2 root root 4096 Nov 30 14:02 .
```

## Решение

**Вариант 1 (Рекомендуемый)**: Исправить права доступа на хосте
- Удалить или пересоздать директорию `backend/vendor` с правильными правами
- Убедиться, что директория принадлежит пользователю хоста

**Вариант 2**: Использовать docker compose с правильными правами
- Запустить `composer install` от root в контейнере
- Затем изменить владельца директории vendor

**Вариант 3**: Добавить в .gitignore и пересоздать
- Удалить vendor из git (если добавлен)
- Пересоздать с правильными правами

## Критерии приемки

✅ `./dev composer install` выполняется успешно  
✅ Директория `backend/vendor` принадлежит пользователю хоста  
✅ PHPUnit доступен в `vendor/bin/phpunit`  
✅ Все зависимости установлены корректно

## Зависимости

- [x] A12: Настроить права доступа в Docker контейнерах (Completed ✅)
- [x] A16: Исправить расположение composer.json (Completed ✅)

## Изменения из CI workflow (задачи A17, A20, A21)

В задачах A17, A20, A21 были исправлены пути для работы в CI, но эти изменения должны работать и локально:

**A20 - Исправлены пути к vendor**:
- ✅ `backend/artisan`: `__DIR__.'/vendor/autoload.php'` (уже исправлено)
- ✅ `backend/public/index.php`: `__DIR__.'/../../vendor/autoload.php'` (уже исправлено)

**Проверка**: Файлы уже содержат правильные пути, но нужно убедиться, что они работают в Docker контейнере.

## Связанные задачи

- A20: Исправить скрипт post-autoload-dump в composer.json (Completed ✅ - пути исправлены)
- A24: Исправить пути в конфигурации PHPStan (связано с путями для Docker)
- B1: Создать модели данных (блокируется отсутствием PHPUnit)

